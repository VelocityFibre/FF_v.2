import{e as je,w as Pe,i as l,t as n,l as t,b as e,p as r,S as p,B as oe,M as w,v as te,C as re,F as $e,m as he}from"./web-DY2gxAax.js";import{c as ke}from"./PhaseTimeline-pQuIR3I4.js";import"./index-Dtoj-mqw.js";import{m as Ce}from"./mockData-D4l3Y6OF.js";import{B as pe}from"./badge-DaVJPDeA.js";import{B as le,C as ne}from"./ThemeSwitcher-qFUB_xEj.js";import{P as be}from"./progress-hbeMakjh.js";import{u as we}from"./user-Br-tLqM2.js";import{u as Te}from"./users-BrqY1fT4.js";import{c as ye}from"./calendar-k80SZwjM.js";import{c as fe}from"./clock-BGlWFxSn.js";import{s as De}from"./settings-CBR9i_7L.js";import{s as Me}from"./square-pen-B7AK6JZ_.js";import{e as Ue}from"./eye-BG6W0YWc.js";import{c as Ie}from"./chart-column-XfRQzxeO.js";import{t as Ae}from"./triangle-alert-vr0RNRgJ.js";import{h as Ne}from"./routing-BTE-NiBa.js";import"./play-BU3iDEd4.js";const _e={admin:{viewTasks:"all",modifyWorkflow:!0,editProjects:!0,manageUsers:!0},project_manager:{viewTasks:"project_tasks",modifyWorkflow:!0,editProjects:!0,manageUsers:!1},field_technician:{viewTasks:"assigned_only",modifyWorkflow:!1,editProjects:!1,manageUsers:!1},design_engineer:{viewTasks:"team_and_assigned",modifyWorkflow:!1,editProjects:!1,manageUsers:!1},client:{viewTasks:"assigned_only",modifyWorkflow:!1,editProjects:!1,manageUsers:!1}};var We=n("<div class=space-y-6>"),Ee=n('<div class="text-center py-8">Loading project overview...'),Oe=n('<p class="text-gray-300 mb-4">'),Be=n('<div class="flex items-center gap-4 text-sm"><span class="flex items-center gap-2"><!$><!/>Project Manager: John Doe'),Re=n('<span class="flex items-center gap-2"><!$><!/><!$><!/> Team Members'),Ve=n('<span class="flex items-center gap-2"><!$><!/>Started <!$><!/>'),Le=n('<span class="flex items-center gap-2"><!$><!/>Due <!$><!/>'),ze=n('<div class="flex items-center gap-6 text-sm"><!$><!/><!$><!/><!$><!/>'),de=n("<a>"),Fe=n('<div class="bg-gradient-to-r from-gray-900 to-gray-700 text-white rounded-lg p-6"><div class="flex items-start justify-between"><div class=flex-1><h1 class="text-3xl font-bold mb-2"></h1><div class="flex items-center gap-4 mb-4"><!$><!/><span class=text-gray-300><!$><!/>% Complete</span></div><!$><!/><!$><!/></div><div class="flex items-center gap-2"></div></div><div class="mt-6 space-y-2"><div class="flex items-center justify-between"><span class=text-gray-300>Overall Progress</span><span class="font-bold text-xl"><!$><!/>%</span></div><!$><!/>'),He=n('<h2 class="text-xl font-semibold mb-6">Phase Progress'),qe=n('<div class="grid grid-cols-1 md:grid-cols-5 gap-4">'),Ge=n('<h2 class="text-xl font-semibold mb-6">'),Je=n('<div class="text-center pt-4"><a>'),Ke=n("<div class=space-y-3><!$><!/><!$><!/>"),Qe=n('<h2 class="text-xl font-semibold mb-6">Team Members'),Xe=n('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">'),Ye=n('<h2 class="text-xl font-semibold mb-6">Recent Activity'),Ze=n("<div class=space-y-4>"),et=n(`<h2 class="text-xl font-semibold text-blue-900 mb-4">What's Happening Next`),tt=n('<div class="flex items-start gap-3"><!$><!/><div><h4 class="font-medium text-blue-900"></h4><p class=text-blue-800></p><p class="text-sm text-blue-600">Expected: <!$><!/>'),rt=n("<div class=space-y-3>"),lt=n('<div class="text-xs text-gray-500"><!$><!/>/<!$><!/> tasks'),nt=n('<div class="text-center p-4 rounded-lg border"><h3 class="font-medium text-gray-900 mb-2"></h3><div class=space-y-3><!$><!/><div class=space-y-1><div class="text-sm text-gray-600"><!$><!/>%</div><!$><!/></div><!$><!/>'),it=n("<span>• Assigned to User <!$><!/>"),st=n("<span>• Due <!$><!/>"),at=n('<div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg"><div class="flex items-center gap-3"><!$><!/><div><h4 class="font-medium text-gray-900"></h4><div class="flex items-center gap-2 text-sm text-gray-600"><span class=capitalize></span><!$><!/><!$><!/></div></div></div><div class="flex items-center gap-3"><!$><!/><div class=text-right><div class="text-sm font-medium"><!$><!/>%</div><!$><!/>'),ct=n('<div class="flex items-center gap-3 p-4 border rounded-lg"><!$><!/><div><h4 class="font-medium text-gray-900"></h4><p class="text-sm text-gray-600 capitalize">'),gt=n('<div class="flex items-start gap-3 p-3 border-l-4 border-blue-500 bg-blue-50"><!$><!/><div><p class=text-gray-900></p><p class="text-sm text-gray-600"><!$><!/> • <!$><!/>');const ot=u=>{const[ie,se]=je(null);Pe(()=>{const _=Ce.getProjectOverview(u.projectId);se(_)});const ve=()=>{const _=_e[u.currentUser.role];return["all","project_tasks"].includes(_.viewTasks)},me=()=>_e[u.currentUser.role].modifyWorkflow,ue=()=>{const _=_e[u.currentUser.role];return["all","project_tasks","team_and_assigned"].includes(_.viewTasks)},ae=()=>{const _=ie();if(!_)return[];switch(_e[u.currentUser.role].viewTasks){case"all":case"project_tasks":return _.allTasks||[];case"team_and_assigned":return _.teamTasks||[];case"assigned_only":return _.myTasks||[];default:return[]}},z=_=>new Date(_).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),Se=_=>({planning:"Planning & Permits",design:"Network Design",implementation:"Installation",testing:"Testing & Activation",deployment:"Go-Live & Handover"})[_]||_;return(()=>{var _=l(We);return t(_,e(p,{get when(){return ie()},get fallback(){return l(Ee)},children:a=>[(()=>{var g=l(Fe),c=g.firstChild,$=c.firstChild,x=$.firstChild,m=x.nextSibling,f=m.firstChild,[h,i]=r(f.nextSibling),o=h.nextSibling,b=o.firstChild,[v,S]=r(b.nextSibling);v.nextSibling;var y=m.nextSibling,[k,T]=r(y.nextSibling),C=k.nextSibling,[I,F]=r(C.nextSibling),A=$.nextSibling,j=c.nextSibling,N=j.firstChild,W=N.firstChild,E=W.nextSibling,O=E.firstChild,[B,M]=r(O.nextSibling);B.nextSibling;var H=N.nextSibling,[ce,q]=r(H.nextSibling);return t(x,()=>a().project.name),t(m,e(pe,{variant:"secondary",class:"bg-white/20 text-white",get children(){return Se(a().project.currentPhase)}}),h,i),t(o,()=>a().progress.overallProgress,v,S),t($,e(p,{get when(){return a().project.description},get children(){var s=l(Oe);return t(s,()=>a().project.description),s}}),k,T),t($,e(oe,{get children(){return[e(w,{get when(){return u.currentUser.role==="client"},get children(){var s=l(Be),U=s.firstChild,R=U.firstChild,[V,G]=r(R.nextSibling);return V.nextSibling,t(U,e(we,{class:"w-4 h-4"}),V,G),s}}),e(w,{get when(){return ue()},get children(){var s=l(ze),U=s.firstChild,[R,V]=r(U.nextSibling),G=R.nextSibling,[ge,P]=r(G.nextSibling),J=ge.nextSibling,[K,Q]=r(J.nextSibling);return t(s,e(p,{get when(){return a().teamMembers},get children(){var d=l(Re),X=d.firstChild,[D,Y]=r(X.nextSibling),Z=D.nextSibling,[L,ee]=r(Z.nextSibling);return L.nextSibling,t(d,e(Te,{class:"w-4 h-4"}),D,Y),t(d,()=>a().teamMembers.length,L,ee),d}}),R,V),t(s,e(p,{get when(){return a().project.startDate},get children(){var d=l(Ve),X=d.firstChild,[D,Y]=r(X.nextSibling),Z=D.nextSibling,L=Z.nextSibling,[ee,xe]=r(L.nextSibling);return t(d,e(ye,{class:"w-4 h-4"}),D,Y),t(d,()=>z(a().project.startDate),ee,xe),d}}),ge,P),t(s,e(p,{get when(){return a().project.targetCompletionDate},get children(){var d=l(Le),X=d.firstChild,[D,Y]=r(X.nextSibling),Z=D.nextSibling,L=Z.nextSibling,[ee,xe]=r(L.nextSibling);return t(d,e(fe,{class:"w-4 h-4"}),D,Y),t(d,()=>z(a().project.targetCompletionDate),ee,xe),d}}),K,Q),s}})]}}),I,F),t(A,e(oe,{get children(){return[e(w,{get when(){return me()},get children(){return[(()=>{var s=l(de);return t(s,e(le,{variant:"secondary",get children(){return[e(De,{class:"w-4 h-4 mr-2"}),"Manage Workflow"]}})),te(()=>re(s,"href",`/projects/${u.projectId}/workflow`)),s})(),(()=>{var s=l(de);return t(s,e(le,{variant:"secondary",get children(){return[e(Me,{class:"w-4 h-4 mr-2"}),"Edit Project"]}})),te(()=>re(s,"href",`/admin/projects/${u.projectId}`)),s})()]}}),e(w,{get when(){return u.currentUser.role==="client"},get children(){var s=l(de);return t(s,e(le,{variant:"secondary",get children(){return[e(Ue,{class:"w-4 h-4 mr-2"}),"View Progress"]}})),te(()=>re(s,"href",`/projects/${u.projectId}/client-portal`)),s}}),e(w,{when:!0,get children(){var s=l(de);return t(s,e(le,{variant:"secondary",get children(){return[e(Ie,{class:"w-4 h-4 mr-2"}),"View Reports"]}})),te(()=>re(s,"href",`/projects/${u.projectId}/timeline`)),s}})]}})),t(E,()=>a().progress.overallProgress,B,M),t(j,e(be,{get value(){return a().progress.overallProgress},max:100,class:"h-3 bg-gray-600"}),ce,q),g})(),e(ne,{class:"p-6",get children(){return[l(He),(()=>{var g=l(qe);return t(g,e($e,{get each(){return a().progress.phases},children:c=>(()=>{var $=l(nt),x=$.firstChild,m=x.nextSibling,f=m.firstChild,[h,i]=r(f.nextSibling),o=h.nextSibling,b=o.firstChild,v=b.firstChild,[S,y]=r(v.nextSibling);S.nextSibling;var k=b.nextSibling,[T,C]=r(k.nextSibling),I=o.nextSibling,[F,A]=r(I.nextSibling);return t(x,()=>Se(c.phase.phaseName)),t(m,e(pe,{variant:"outline",get class(){return c.status==="completed"?"bg-green-50 text-green-700":c.status==="active"?"bg-blue-50 text-blue-700":"bg-gray-50 text-gray-500"},get children(){return c.status}}),h,i),t(b,()=>c.progress,S,y),t(o,e(be,{get value(){return c.progress},max:100,class:"h-2"}),T,C),t(m,e(p,{get when(){return ve()},get children(){var j=l(lt),N=j.firstChild,[W,E]=r(N.nextSibling),O=W.nextSibling,B=O.nextSibling,[M,H]=r(B.nextSibling);return M.nextSibling,t(j,()=>c.tasksCompleted,W,E),t(j,()=>c.tasksTotal,M,H),j}}),F,A),$})()})),g})()]}}),e(p,{get when(){return ae().length>0},get children(){return e(ne,{class:"p-6",get children(){return[(()=>{var g=l(Ge);return t(g,e(oe,{get children(){return[e(w,{get when(){return u.currentUser.role==="field_technician"},children:"My Assigned Tasks"}),e(w,{get when(){return ve()},children:"All Project Tasks"}),e(w,{get when(){return ue()},children:"Team Tasks"})]}})),g})(),(()=>{var g=l(Ke),c=g.firstChild,[$,x]=r(c.nextSibling),m=$.nextSibling,[f,h]=r(m.nextSibling);return t(g,e($e,{get each(){return ae().slice(0,5)},children:i=>(()=>{var o=l(at),b=o.firstChild,v=b.firstChild,[S,y]=r(v.nextSibling),k=S.nextSibling,T=k.firstChild,C=T.nextSibling,I=C.firstChild,F=I.nextSibling,[A,j]=r(F.nextSibling),N=A.nextSibling,[W,E]=r(N.nextSibling),O=b.nextSibling,B=O.firstChild,[M,H]=r(B.nextSibling),ce=M.nextSibling,q=ce.firstChild,s=q.firstChild,[U,R]=r(s.nextSibling);U.nextSibling;var V=q.nextSibling,[G,ge]=r(V.nextSibling);return t(b,e(oe,{get children(){return[e(w,{get when(){return i.status==="completed"},get children(){return e(ke,{class:"w-5 h-5 text-green-600"})}}),e(w,{get when(){return i.urgencyStatus==="overdue"},get children(){return e(Ae,{class:"w-5 h-5 text-red-600"})}}),e(w,{when:!0,get children(){return e(fe,{class:"w-5 h-5 text-gray-400"})}})]}}),S,y),t(T,()=>i.taskName),t(I,()=>i.phaseName),t(C,e(p,{get when(){return ue()&&i.assigneeId},get children(){var P=l(it),J=P.firstChild,K=J.nextSibling,[Q,d]=r(K.nextSibling);return t(P,()=>i.assigneeId,Q,d),P}}),A,j),t(C,e(p,{get when(){return i.dueDate},get children(){var P=l(st),J=P.firstChild,K=J.nextSibling,[Q,d]=r(K.nextSibling);return t(P,()=>z(i.dueDate),Q,d),P}}),W,E),t(O,e(pe,{variant:"outline",get class(){return i.urgencyStatus==="overdue"?"text-red-600 border-red-200":i.urgencyStatus==="due_today"?"text-yellow-600 border-yellow-200":"text-gray-600"},get children(){return i.urgencyStatus.replace("_"," ")}}),M,H),t(q,()=>i.completionPercentage,U,R),t(ce,e(be,{get value(){return i.completionPercentage},max:100,class:"h-1 w-16"}),G,ge),o})()}),$,x),t(g,e(p,{get when(){return ae().length>5},get children(){var i=l(Je),o=i.firstChild;return t(o,e(le,{variant:"outline",get children(){return["View All ",he(()=>ae().length)," Tasks"]}})),te(()=>re(o,"href",`/tasks/my-tasks?project=${u.projectId}`)),i}}),f,h),g})()]}})}}),e(p,{get when(){return he(()=>!!me())()&&a().teamMembers},get children(){return e(ne,{class:"p-6",get children(){return[l(Qe),(()=>{var g=l(Xe);return t(g,e($e,{get each(){return a().teamMembers},children:c=>(()=>{var $=l(ct),x=$.firstChild,[m,f]=r(x.nextSibling),h=m.nextSibling,i=h.firstChild,o=i.nextSibling;return t($,e(we,{class:"w-10 h-10 text-gray-400"}),m,f),t(i,()=>c.name),t(o,()=>c.role.replace("_"," ")),$})()})),g})()]}})}}),e(p,{get when(){return he(()=>!!me())()&&a().recentActivity},get children(){return e(ne,{class:"p-6",get children(){return[l(Ye),(()=>{var g=l(Ze);return t(g,e($e,{get each(){return a().recentActivity?.slice(0,5)},children:c=>(()=>{var $=l(gt),x=$.firstChild,[m,f]=r(x.nextSibling),h=m.nextSibling,i=h.firstChild,o=i.nextSibling,b=o.firstChild,[v,S]=r(b.nextSibling),y=v.nextSibling,k=y.nextSibling,[T,C]=r(k.nextSibling);return t($,e(fe,{class:"w-5 h-5 text-blue-600 mt-0.5"}),m,f),t(i,()=>c.description),t(o,()=>c.user,v,S),t(o,()=>z(c.timestamp),T,C),$})()})),g})()]}})}}),e(p,{get when(){return u.currentUser.role==="client"},get children(){return e(ne,{class:"p-6 bg-blue-50 border-blue-200",get children(){return[l(et),(()=>{var g=l(rt);return t(g,e(p,{get when(){return a().progress.nextMilestone},get children(){var c=l(tt),$=c.firstChild,[x,m]=r($.nextSibling),f=x.nextSibling,h=f.firstChild,i=h.nextSibling,o=i.nextSibling,b=o.firstChild,v=b.nextSibling,[S,y]=r(v.nextSibling);return t(c,e(ye,{class:"w-5 h-5 text-blue-600 mt-0.5"}),x,m),t(h,()=>a().progress.nextMilestone.name),t(i,()=>a().progress.nextMilestone.description),t(o,()=>z(a().progress.nextMilestone.estimatedDate),S,y),c}})),g})()]}})}})]})),_})()};var $t=n("<div class=ff-page-container>");const Dt=()=>{const u=Ne(),ie=Ce.getCurrentUser("project_manager");return(()=>{var se=l($t);return t(se,e(ot,{get projectId(){return u.id},currentUser:ie})),se})()};export{Dt as default};
