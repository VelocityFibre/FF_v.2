import{createComponent as a,mergeProps as x,isServer as B,getRequestEvent as V,delegateEvents as Z,ssr as g,ssrHydrationKey as p,escape as o}from"solid-js/web";import{children as Q,createMemo as M,getOwner as Y,untrack as ee,Show as v,on as te,createRoot as re,createSignal as w,onCleanup as K,sharedConfig as A,For as I,createEffect as ae,Suspense as ne}from"solid-js";import{F as oe}from"./server-fns-C7nyRIkg.js";import{I as y,u as se,T as ie}from"./ThemeProvider-a-TiApaf.js";import"./index-D6nAbMgh.js";import{c as le}from"./calendar-6DOOgMUY.js";import{c as z}from"./clock-CX7dAqcH.js";import{f as S}from"./folder-open-BDmM4pk8.js";import{p as ce}from"./phone-DhZMu1hD.js";import{s as N}from"./settings-B7H7OYKR.js";import{u as de}from"./user-plus-BuOm5O4z.js";import{u as C}from"./users-DmOdNUV-.js";import{c as U}from"./chart-column-0fmmXZyP.js";import{s as _}from"./square-check-big-CosC2anP.js";import{c as ue,b as he,R as fe,g as me,d as ge,e as D,f as pe,m as be,h as ve,k as we,s as xe,n as ye,i as ke}from"./routing-CDw4d2oX.js";import{B as W}from"./badge-DswBmzwq.js";import{A as $e}from"./components-CWgRo50f.js";import{s as q,m as _e,z as je,a as Se}from"./zap-BiajdHZJ.js";import{b as Re}from"./bell-Cd_Dsz6z.js";import{u as Ce}from"./user-DuHvLNkd.js";import{m as Le}from"./mockData-D4l3Y6OF.js";import"seroval";import"seroval-plugins/web";import"solid-js/web/storage";import"h3";import"unctx";import"node:async_hooks";import"radix3";var Pe=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Te=e=>a(y,x(e,{name:"ChevronDown",iconNode:Pe})),G=Te,Ue=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ae=e=>a(y,x(e,{name:"ChevronRight",iconNode:Ue})),Ne=Ae,Me=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Oe=e=>a(y,x(e,{name:"CirclePlus",iconNode:Me})),Ee=Oe,Fe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ie=e=>a(y,x(e,{name:"FileText",iconNode:Fe})),ze=Ie,De=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],qe=e=>a(y,x(e,{name:"House",iconNode:De})),L=qe,He=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],Be=e=>a(y,x(e,{name:"LogOut",iconNode:He})),Ve=Be,Ke=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],We=e=>a(y,x(e,{name:"Menu",iconNode:Ke})),X=We,Ge=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Xe=e=>a(y,x(e,{name:"Search",iconNode:Ge})),Je=Xe,Ze=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Qe=e=>a(y,x(e,{name:"X",iconNode:Ze})),Ye=Qe;const J=e=>r=>{const{base:s}=r,n=Q(()=>r.children),t=M(()=>ue(n(),r.base||""));let l;const c=he(e,t,()=>l,{base:s,singleFlight:r.singleFlight,transformUrl:r.transformUrl});return e.create&&e.create(c),a(fe.Provider,{value:c,get children(){return a(et,{routerState:c,get root(){return r.root},get preload(){return r.rootPreload||r.rootLoad},get children(){return[(l=Y())&&null,a(tt,{routerState:c,get branches(){return t()}})]}})}})};function et(e){const r=e.routerState.location,s=e.routerState.params,n=M(()=>e.preload&&ee(()=>{e.preload({params:s,location:r,intent:me()||"initial"})}));return a(v,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:t=>a(t,{params:s,location:r,get data(){return n()},get children(){return e.children}})})}function tt(e){if(B){const t=V();if(t&&t.router&&t.router.dataOnly){rt(t,e.routerState,e.branches);return}t&&((t.router||(t.router={})).matches||(t.router.matches=e.routerState.matches().map(({route:l,path:c,params:i})=>({path:l.originalPath,pattern:l.pattern,match:c,params:i,info:l.info}))))}const r=[];let s;const n=M(te(e.routerState.matches,(t,l,c)=>{let i=l&&t.length===l.length;const h=[];for(let f=0,k=t.length;f<k;f++){const j=l&&l[f],$=t[f];c&&j&&$.route.key===j.route.key?h[f]=c[f]:(i=!1,r[f]&&r[f](),re(P=>{r[f]=P,h[f]=ge(e.routerState,h[f-1]||e.routerState.base,H(()=>n()[f+1]),()=>e.routerState.matches()[f])}))}return r.splice(t.length).forEach(f=>f()),c&&i?c:(s=h[0],h)}));return H(()=>n()&&s)()}const H=e=>()=>a(v,{get when(){return e()},keyed:!0,children:r=>a(pe.Provider,{value:r,get children(){return r.outlet()}})});function rt(e,r,s){const n=new URL(e.request.url),t=D(s,new URL(e.router.previousUrl||e.request.url).pathname),l=D(s,n.pathname);for(let c=0;c<l.length;c++){(!t[c]||l[c].route!==t[c].route)&&(e.router.dataOnly=!0);const{route:i,params:h}=l[c];i.preload&&i.preload({params:h,location:r.location,intent:"preload"})}}function at([e,r],s,n){return[e,n?t=>r(n(t)):r]}function nt(e){let r=!1;const s=t=>typeof t=="string"?{value:t}:t,n=at(w(s(e.get()),{equals:(t,l)=>t.value===l.value&&t.state===l.state}),void 0,t=>(!r&&e.set(t),A.registry&&!A.done&&(A.done=!0),t));return e.init&&K(e.init((t=e.get())=>{r=!0,n[1](s(t)),r=!1})),J({signal:n,create:e.create,utils:e.utils})}function ot(e,r,s){return e.addEventListener(r,s),()=>e.removeEventListener(r,s)}function st(e,r){const s=e&&document.getElementById(e);s?s.scrollIntoView():r&&window.scrollTo(0,0)}function it(e){const r=new URL(e);return r.pathname+r.search}function lt(e){let r;const s={value:e.url||(r=V())&&it(r.request.url)||""};return J({signal:[()=>s,n=>Object.assign(s,n)]})(e)}const ct=new Map;function dt(e=!0,r=!1,s="/_server",n){return t=>{const l=t.base.path(),c=t.navigatorFactory(t.base);let i,h;function f(d){return d.namespaceURI==="http://www.w3.org/2000/svg"}function k(d){if(d.defaultPrevented||d.button!==0||d.metaKey||d.altKey||d.ctrlKey||d.shiftKey)return;const u=d.composedPath().find(F=>F instanceof Node&&F.nodeName.toUpperCase()==="A");if(!u||r&&!u.hasAttribute("link"))return;const b=f(u),m=b?u.href.baseVal:u.href;if((b?u.target.baseVal:u.target)||!m&&!u.hasAttribute("state"))return;const R=(u.getAttribute("rel")||"").split(/\s+/);if(u.hasAttribute("download")||R&&R.includes("external"))return;const T=b?new URL(m,document.baseURI):new URL(m);if(!(T.origin!==window.location.origin||l&&T.pathname&&!T.pathname.toLowerCase().startsWith(l.toLowerCase())))return[u,T]}function j(d){const u=k(d);if(!u)return;const[b,m]=u,E=t.parsePath(m.pathname+m.search+m.hash),R=b.getAttribute("state");d.preventDefault(),c(E,{resolve:!1,replace:b.hasAttribute("replace"),scroll:!b.hasAttribute("noscroll"),state:R?JSON.parse(R):void 0})}function $(d){const u=k(d);if(!u)return;const[b,m]=u;n&&(m.pathname=n(m.pathname)),t.preloadRoute(m,b.getAttribute("preload")!=="false")}function P(d){clearTimeout(i);const u=k(d);if(!u)return h=null;const[b,m]=u;h!==b&&(n&&(m.pathname=n(m.pathname)),i=setTimeout(()=>{t.preloadRoute(m,b.getAttribute("preload")!=="false"),h=b},20))}function O(d){if(d.defaultPrevented)return;let u=d.submitter&&d.submitter.hasAttribute("formaction")?d.submitter.getAttribute("formaction"):d.target.getAttribute("action");if(!u)return;if(!u.startsWith("https://action/")){const m=new URL(u,be);if(u=t.parsePath(m.pathname+m.search),!u.startsWith(s))return}if(d.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const b=ct.get(u);if(b){d.preventDefault();const m=new FormData(d.target,d.submitter);b.call({r:t,f:d.target},d.target.enctype==="multipart/form-data"?m:new URLSearchParams(m))}}Z(["click","submit"]),document.addEventListener("click",j),e&&(document.addEventListener("mousemove",P,{passive:!0}),document.addEventListener("focusin",$,{passive:!0}),document.addEventListener("touchstart",$,{passive:!0})),document.addEventListener("submit",O),K(()=>{document.removeEventListener("click",j),e&&(document.removeEventListener("mousemove",P),document.removeEventListener("focusin",$),document.removeEventListener("touchstart",$)),document.removeEventListener("submit",O)})}}function ut(e){if(B)return lt(e);const r=()=>{const n=window.location.pathname.replace(/^\/+/,"/")+window.location.search,t=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:n+window.location.hash,state:t}},s=ve();return nt({get:r,set({value:n,replace:t,scroll:l,state:c}){t?window.history.replaceState(we(c),"",n):window.history.pushState(c,"",n),st(decodeURIComponent(window.location.hash.slice(1)),l),xe()},init:n=>ot(window,"popstate",ye(n,t=>{if(t&&t<0)return!s.confirm(t);{const l=r();return!s.confirm(l.value,{state:l.state})}})),create:dt(e.preload,e.explicitLinks,e.actionBase,e.transformUrl),utils:{go:n=>window.history.go(n),beforeLeave:s}})(e)}const ht={admin:[{id:"dashboard",label:"Dashboard",href:"/dashboard",icon:L},{id:"projects",label:"Projects",href:"/admin/projects",icon:S,children:[{id:"all-projects",label:"All Projects",href:"/admin/projects",icon:S},{id:"create-project",label:"Create Project",href:"/admin/projects/new",icon:Ee}]},{id:"tasks",label:"Tasks",href:"/admin/tasks",icon:_,children:[{id:"all-tasks",label:"All Tasks",href:"/admin/tasks",icon:_},{id:"my-tasks",label:"My Tasks",href:"/tasks/my-tasks",icon:_},{id:"overdue-tasks",label:"Overdue Tasks",href:"/admin/tasks?filter=overdue",icon:z}]},{id:"users",label:"Users",href:"/admin/users",icon:C,children:[{id:"all-users",label:"All Users",href:"/admin/users",icon:C},{id:"add-user",label:"Add User",href:"/admin/users/new",icon:de}]},{id:"reports",label:"Reports",href:"/admin/reports",icon:U},{id:"settings",label:"Settings",href:"/admin/settings",icon:N},{id:"role-switcher",label:"Role Switcher",href:"/admin/role-switcher",icon:C}],project_manager:[{id:"dashboard",label:"Dashboard",href:"/dashboard",icon:L},{id:"projects",label:"My Projects",href:"/projects",icon:S},{id:"tasks",label:"Tasks",href:"/tasks/my-tasks",icon:_,children:[{id:"project-tasks",label:"Project Tasks",href:"/tasks/project-tasks",icon:_},{id:"my-tasks",label:"My Tasks",href:"/tasks/my-tasks",icon:_},{id:"team-tasks",label:"Team Tasks",href:"/tasks/team-tasks",icon:C}]},{id:"team",label:"Team",href:"/team",icon:C},{id:"reports",label:"Reports",href:"/reports",icon:U},{id:"settings",label:"Settings",href:"/settings",icon:N}],field_technician:[{id:"dashboard",label:"Dashboard",href:"/dashboard",icon:L},{id:"tasks",label:"My Tasks",href:"/tasks/my-tasks",icon:_,badge:"3"},{id:"projects",label:"My Projects",href:"/projects",icon:S},{id:"timetracking",label:"Time Tracking",href:"/time-tracking",icon:z},{id:"reports",label:"Reports",href:"/reports/personal",icon:ze}],design_engineer:[{id:"dashboard",label:"Dashboard",href:"/dashboard",icon:L},{id:"tasks",label:"My Tasks",href:"/tasks/my-tasks",icon:_},{id:"projects",label:"Projects",href:"/projects",icon:S},{id:"calendar",label:"Calendar",href:"/calendar",icon:le},{id:"reports",label:"Reports",href:"/reports",icon:U}],client:[{id:"dashboard",label:"Dashboard",href:"/dashboard",icon:L},{id:"projects",label:"My Projects",href:"/projects",icon:S},{id:"reports",label:"Progress Reports",href:"/reports",icon:U},{id:"support",label:"Support",href:"/support",icon:ce}]},ft=e=>ht[e]||[];var mt=["<span",' class="truncate">',"</span>"],gt=["<button",' class="','">',"</button>"],pt=["<div",' class="mt-1 space-y-1">',"</div>"],bt=["<div",' class="ff-nav-item"><div class="flex items-center"><!--$-->',"<!--/--><!--$-->","<!--/--></div><!--$-->","<!--/--></div>"],vt=["<div",' class="flex items-center gap-3"><div class="w-8 h-8 bg-primary rounded-lg flex items-center justify-center"><span class="text-primary-foreground font-bold text-sm">FF</span></div><div><h1 class="font-semibold text-foreground">FibreFlow</h1><p class="text-xs text-muted-foreground capitalize">',"</p></div></div>"],wt=["<div",' class="border-t border-border p-4"><div class="flex items-center gap-3"><div class="w-8 h-8 bg-accent rounded-full flex items-center justify-center"><span class="text-sm font-medium text-accent-foreground">','</span></div><div class="flex-1 min-w-0"><p class="text-sm font-medium text-foreground truncate">','</p><p class="text-xs text-muted-foreground truncate">',"</p></div></div></div>"],xt=["<div",' class="ff-sidebar flex flex-col h-full bg-card border-r border-border"><div class="flex items-center justify-between p-4 border-b border-border"><!--$-->','<!--/--><button class="lg:hidden p-1 rounded hover:bg-accent text-muted-foreground">','</button><button class="hidden lg:block p-1 rounded hover:bg-accent text-muted-foreground">','</button></div><nav class="flex-1 overflow-y-auto p-4 space-y-2">',"</nav><!--$-->","<!--/--></div>"],yt=["<div",' class="w-8 h-8 bg-primary rounded-lg flex items-center justify-center"><span class="text-primary-foreground font-bold text-sm">FF</span></div>'];const kt=e=>{const r=ke(),[s,n]=w(new Set),t=()=>ft(e.currentUser.role),l=i=>r.pathname===i||r.pathname.startsWith(i+"/"),c=({item:i,depth:h=0})=>{const f=i.children&&i.children.length>0,k=()=>s().has(i.id),j=()=>l(i.href);return g(bt,p(),o(a($e,{get href(){return i.href},get class(){return`
              flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium
              transition-colors duration-200 flex-1
              ${j()?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"}
              ${e.collapsed&&h===0?"justify-center px-2":""}
              ${h>0?"ml-6 pl-6 border-l border-border":""}
            `},onClick:()=>e.onClose(),get children(){return[a(i.icon,{get class(){return`flex-shrink-0 ${e.collapsed&&h===0?"w-5 h-5":"w-4 h-4"}`}}),a(v,{get when(){return!e.collapsed||h>0},get children(){return[g(mt,p(),o(i.label)),a(v,{get when(){return i.badge},get children(){return a(W,{variant:"secondary",class:"ml-auto text-xs",get children(){return i.badge}})}})]}})]}})),o(a(v,{get when(){return f&&(!e.collapsed||h>0)},get children(){return g(gt,p(),`
                p-1 rounded hover:bg-accent text-muted-foreground 
                transition-colors duration-200 ml-1
              `,k()?o(a(G,{class:"w-4 h-4"})):o(a(Ne,{class:"w-4 h-4"})))}})),o(a(v,{get when(){return f&&k()&&(!e.collapsed||h>0)},get children(){return g(pt,p(),o(a(I,{get each(){return i.children},children:$=>a(c,{item:$,depth:h+1})})))}})))};return g(xt,p(),o(a(v,{get when(){return!e.collapsed},get fallback(){return g(yt,p())},get children(){return g(vt,p(),o(e.currentUser.role.replace("_"," ")))}})),o(a(Ye,{class:"w-5 h-5"})),o(a(X,{class:"w-4 h-4"})),o(a(I,{get each(){return t()},children:i=>a(c,{item:i})})),o(a(v,{get when(){return!e.collapsed},get children(){return g(wt,p(),o(e.currentUser.name.split(" ").map(i=>i[0]).join("")),o(e.currentUser.name),o(e.currentUser.email))}})))};var $t=["<div",' class="relative"><button class="p-2 rounded-lg bg-card border border-border hover:bg-accent transition-colors duration-200 shadow-sm" title="Switch theme">',"</button><!--$-->","<!--/--></div>"],_t=["<div",' class="fixed inset-0 z-40"></div>'],jt=["<div",' class="absolute right-0 top-full mt-2 z-50 bg-card border border-border rounded-lg shadow-lg p-1 min-w-[120px]">',"</div>"],St=["<button",' class="','"><!--$-->',"<!--/--><span>","</span></button>"];function Rt(){const{theme:e,setTheme:r}=se(),[s,n]=w(!1),t=[{value:"light",icon:q,label:"Light"},{value:"dark",icon:_e,label:"Dark"},{value:"vf",icon:je,label:"VF"},{value:"fibreflow",icon:Se,label:"Flow"}],l=()=>t.find(i=>i.value===e()),c=()=>l()?.icon||q;return g($t,p(),o(a(c,{class:"w-4 h-4 text-foreground"})),s()&&o([g(_t,p()),g(jt,p(),o(t.map(i=>{const h=i.icon,f=e()===i.value;return g(St,p(),`
                    w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm transition-colors duration-200
                    ${f?"bg-accent text-accent-foreground font-medium":"text-foreground hover:bg-accent/50"}
                  `,o(a(h,{class:"w-4 h-4"})),o(i.label))})))]))}var Ct=["<div",' class="absolute top-full left-0 right-0 mt-1 bg-card border border-border rounded-lg shadow-lg z-50"><div class="p-3"><p class="text-sm text-muted-foreground">Start typing to search...</p></div></div>'],Lt=["<div",' class="absolute top-full right-0 mt-1 w-80 bg-card border border-border rounded-lg shadow-lg z-50"><div class="p-4 border-b border-border"><h3 class="font-semibold text-foreground">Notifications</h3></div><div class="p-3"><p class="text-sm text-muted-foreground">No new notifications</p></div></div>'],Pt=["<div",' class="hidden md:block text-left"><p class="text-sm font-medium text-foreground">','</p><p class="text-xs text-muted-foreground capitalize">',"</p></div>"],Tt=["<div",' class="absolute top-full right-0 mt-1 w-48 bg-card border border-border rounded-lg shadow-lg z-50"><div class="p-2"><a href="/profile" class="flex items-center gap-2 px-3 py-2 text-sm rounded hover:bg-accent transition-colors"><!--$-->','<!--/-->Profile</a><a href="/settings" class="flex items-center gap-2 px-3 py-2 text-sm rounded hover:bg-accent transition-colors"><!--$-->','<!--/-->Settings</a><hr class="my-1 border-border"><button class="flex items-center gap-2 px-3 py-2 text-sm rounded hover:bg-accent transition-colors w-full text-left text-destructive"><!--$-->',"<!--/-->Logout</button></div></div>"],Ut=["<header",' class="ff-topbar flex items-center justify-between h-16 px-4 bg-card border-b border-border"><div class="flex items-center gap-4"><button class="lg:hidden p-2 rounded-lg hover:bg-accent text-muted-foreground">','</button><div class="','"><div class="relative"><!--$-->','<!--/--><input type="text" placeholder="Search projects, tasks, users..." class="','"></div><!--$-->','<!--/--></div></div><div class="flex items-center gap-2"><!--$-->','<!--/--><div class="relative"><button class="relative p-2 rounded-lg hover:bg-accent text-muted-foreground transition-colors"><!--$-->',"<!--/--><!--$-->","<!--/--></button><!--$-->",'<!--/--></div><div class="relative"><button class="flex items-center gap-2 p-2 rounded-lg hover:bg-accent transition-colors"><div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center"><span class="text-primary-foreground text-sm font-medium">',"</span></div><!--$-->","<!--/--><!--$-->","<!--/--></button><!--$-->","<!--/--></div></div></header>"];const At=e=>{const[r,s]=w(!1),[n,t]=w(!1),[l,c]=w(!1),i=3;return g(Ut,p(),o(a(X,{class:"w-5 h-5"})),`
          relative transition-all duration-200
          ${r()?"w-80":"w-64"}
          hidden sm:block
        `,o(a(Je,{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"})),`
                w-full pl-10 pr-4 py-2 bg-accent/50 border border-border rounded-lg
                text-sm placeholder:text-muted-foreground
                focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent
                transition-all duration-200
              `,o(a(v,{get when(){return r()},get children(){return g(Ct,p())}})),o(a(Rt,{})),o(a(Re,{class:"w-5 h-5"})),o(a(v,{when:i>0,get children(){return a(W,{variant:"destructive",class:"absolute -top-1 -right-1 min-w-[18px] h-[18px] text-xs flex items-center justify-center p-0",children:i})}})),o(a(v,{get when(){return l()},get children(){return g(Lt,p())}})),o(e.currentUser.name.split(" ").map(h=>h[0]).join("")),o(a(v,{get when(){return!e.sidebarCollapsed},get children(){return g(Pt,p(),o(e.currentUser.name),o(e.currentUser.role.replace("_"," ")))}})),o(a(G,{class:"w-4 h-4 text-muted-foreground"})),o(a(v,{get when(){return n()},get children(){return g(Tt,p(),o(a(Ce,{class:"w-4 h-4"})),o(a(N,{class:"w-4 h-4"})),o(a(Ve,{class:"w-4 h-4"})))}})))};var Nt=["<div",' class="fixed inset-0 bg-black/50 z-40 lg:hidden"></div>'],Mt=["<div",' class="ff-app-layout flex h-screen bg-background"><!--$-->','<!--/--><div class="','">','</div><div class="flex-1 flex flex-col overflow-hidden"><!--$-->','<!--/--><main class="flex-1 overflow-y-auto bg-gray-50"><div class="h-full">',"</div></main></div></div>"];const Ot=e=>{const[r,s]=w(!1),[n,t]=w(!1),l=()=>s(!r()),c=()=>t(!n());return g(Mt,p(),o(a(v,{get when(){return r()},get children(){return g(Nt,p())}})),`
        fixed lg:relative inset-y-0 left-0 z-50 lg:z-0
        transition-transform duration-300 ease-in-out
        w-[280px]
        ${n()?"lg:w-16":"lg:w-[280px]"}
        ${r()?"translate-x-0":"-translate-x-full"}
        lg:translate-x-0
      `,o(a(kt,{get currentUser(){return e.currentUser},get collapsed(){return n()},onToggleCollapse:c,onClose:()=>s(!1)})),o(a(At,{get currentUser(){return e.currentUser},onToggleSidebar:l,get sidebarCollapsed(){return n()}})),o(e.children))};var Et=["<div",' class="flex items-center justify-center min-h-screen">Loading...</div>'];function hr(){const[e,r]=w("admin");ae(()=>{if(typeof window<"u"){const t=new URLSearchParams(window.location.search).get("role");t&&["admin","project_manager","field_technician","design_engineer","client"].includes(t)&&r(t)}});const s=()=>Le.getCurrentUser(e());return a(ie,{get children(){return a(ut,{root:n=>a(Ot,{get currentUser(){return s()},get children(){return a(ne,{get fallback(){return g(Et,p())},get children(){return n.children}})}}),get children(){return a(oe,{})}})}})}export{hr as default};
