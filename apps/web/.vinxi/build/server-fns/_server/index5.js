import{ssr as s,ssrHydrationKey as n,escape as e,createComponent as t}from"solid-js/web";import"./assets/index-D6nAbMgh.js";import{m as T}from"./assets/mockData-D4l3Y6OF.js";import{createSignal as U,createEffect as M,Show as i,Switch as p,Match as c,For as h}from"solid-js";import{B as $}from"./assets/badge-DswBmzwq.js";import{B as d}from"./assets/button-BIPZjNFL.js";import{P as _}from"./assets/progress-CllnRpSM.js";import{C as g}from"./assets/card-BBkvPB4n.js";import{u as P}from"./assets/user-DuHvLNkd.js";import{u as S}from"./assets/users-DmOdNUV-.js";import{c as k}from"./assets/calendar-6DOOgMUY.js";import{c as y}from"./assets/clock-CX7dAqcH.js";import{s as I}from"./assets/settings-B7H7OYKR.js";import{s as A}from"./assets/square-pen-Dn14tpLZ.js";import{e as W}from"./assets/eye-CixO-siI.js";import{c as C}from"./assets/chart-column-0fmmXZyP.js";import{c as N}from"./assets/circle-check-big-D3taKIIs.js";import{t as O}from"./assets/triangle-alert-B-KKK4Eb.js";import{u as E}from"./assets/routing-CDw4d2oX.js";import"./assets/ThemeProvider-a-TiApaf.js";const v={admin:{viewTasks:"all",modifyWorkflow:!0,editProjects:!0,manageUsers:!0},project_manager:{viewTasks:"project_tasks",modifyWorkflow:!0,editProjects:!0,manageUsers:!1},field_technician:{viewTasks:"assigned_only",modifyWorkflow:!1,editProjects:!1,manageUsers:!1},design_engineer:{viewTasks:"team_and_assigned",modifyWorkflow:!1,editProjects:!1,manageUsers:!1},client:{viewTasks:"assigned_only",modifyWorkflow:!1,editProjects:!1,manageUsers:!1}};var V=["<div",' class="space-y-6">',"</div>"],B=["<div",' class="text-center py-8">Loading project overview...</div>'],L=["<p",' class="text-gray-300 mb-4">',"</p>"],R=["<div",' class="flex items-center gap-4 text-sm"><span class="flex items-center gap-2"><!--$-->',"<!--/-->Project Manager: John Doe</span></div>"],H=["<span",' class="flex items-center gap-2"><!--$-->',"<!--/--><!--$-->","<!--/--> Team Members</span>"],z=["<span",' class="flex items-center gap-2"><!--$-->',"<!--/-->Started <!--$-->","<!--/--></span>"],q=["<span",' class="flex items-center gap-2"><!--$-->',"<!--/-->Due <!--$-->","<!--/--></span>"],F=["<div",' class="flex items-center gap-6 text-sm"><!--$-->',"<!--/--><!--$-->","<!--/--><!--$-->","<!--/--></div>"],f=["<a",' href="','">',"</a>"],G=["<div",' class="bg-gradient-to-r from-gray-900 to-gray-700 text-white rounded-lg p-6"><div class="flex items-start justify-between"><div class="flex-1"><h1 class="text-3xl font-bold mb-2">','</h1><div class="flex items-center gap-4 mb-4"><!--$-->','<!--/--><span class="text-gray-300"><!--$-->',"<!--/-->% Complete</span></div><!--$-->","<!--/--><!--$-->",'<!--/--></div><div class="flex items-center gap-2">','</div></div><div class="mt-6 space-y-2"><div class="flex items-center justify-between"><span class="text-gray-300">Overall Progress</span><span class="font-bold text-xl"><!--$-->',"<!--/-->%</span></div><!--$-->","<!--/--></div></div>"],J=["<h2",' class="text-xl font-semibold mb-6">Phase Progress</h2>'],K=["<div",' class="grid grid-cols-1 md:grid-cols-5 gap-4">',"</div>"],Q=["<h2",' class="text-xl font-semibold mb-6">',"</h2>"],X=["<div",' class="text-center pt-4"><a href="','">',"</a></div>"],Y=["<div",' class="space-y-3"><!--$-->',"<!--/--><!--$-->","<!--/--></div>"],Z=["<h2",' class="text-xl font-semibold mb-6">Team Members</h2>'],ee=["<div",' class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">',"</div>"],te=["<h2",' class="text-xl font-semibold mb-6">Recent Activity</h2>'],re=["<div",' class="space-y-4">',"</div>"],se=["<h2",` class="text-xl font-semibold text-blue-900 mb-4">What's Happening Next</h2>`],ne=["<div",' class="flex items-start gap-3"><!--$-->','<!--/--><div><h4 class="font-medium text-blue-900">','</h4><p class="text-blue-800">','</p><p class="text-sm text-blue-600">Expected: <!--$-->',"<!--/--></p></div></div>"],ae=["<div",' class="space-y-3">',"</div>"],le=["<div",' class="text-xs text-gray-500"><!--$-->',"<!--/-->/<!--$-->","<!--/--> tasks</div>"],ie=["<div",' class="text-center p-4 rounded-lg border"><h3 class="font-medium text-gray-900 mb-2">','</h3><div class="space-y-3"><!--$-->','<!--/--><div class="space-y-1"><div class="text-sm text-gray-600"><!--$-->',"<!--/-->%</div><!--$-->","<!--/--></div><!--$-->","<!--/--></div></div>"],ce=["<span",">• Assigned to User <!--$-->","<!--/--></span>"],oe=["<span",">• Due <!--$-->","<!--/--></span>"],de=["<div",' class="flex items-center justify-between p-4 bg-gray-50 rounded-lg"><div class="flex items-center gap-3"><!--$-->','<!--/--><div><h4 class="font-medium text-gray-900">','</h4><div class="flex items-center gap-2 text-sm text-gray-600"><span class="capitalize">',"</span><!--$-->","<!--/--><!--$-->",'<!--/--></div></div></div><div class="flex items-center gap-3"><!--$-->','<!--/--><div class="text-right"><div class="text-sm font-medium"><!--$-->',"<!--/-->%</div><!--$-->","<!--/--></div></div></div>"],ge=["<div",' class="flex items-center gap-3 p-4 border rounded-lg"><!--$-->','<!--/--><div><h4 class="font-medium text-gray-900">','</h4><p class="text-sm text-gray-600 capitalize">',"</p></div></div>"],me=["<div",' class="flex items-start gap-3 p-3 border-l-4 border-blue-500 bg-blue-50"><!--$-->','<!--/--><div><p class="text-gray-900">','</p><p class="text-sm text-gray-600"><!--$-->',"<!--/--> • <!--$-->","<!--/--></p></div></div>"];const ue=l=>{const[m,D]=U(null);M(()=>{const r=T.getProjectOverview(l.projectId);D(r)});const b=()=>{const r=v[l.currentUser.role];return["all","project_tasks"].includes(r.viewTasks)},x=()=>v[l.currentUser.role].modifyWorkflow,w=()=>{const r=v[l.currentUser.role];return["all","project_tasks","team_and_assigned"].includes(r.viewTasks)},u=()=>{const r=m();if(!r)return[];switch(v[l.currentUser.role].viewTasks){case"all":case"project_tasks":return r.allTasks||[];case"team_and_assigned":return r.teamTasks||[];case"assigned_only":return r.myTasks||[];default:return[]}},o=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),j=r=>({planning:"Planning & Permits",design:"Network Design",implementation:"Installation",testing:"Testing & Activation",deployment:"Go-Live & Handover"})[r]||r;return s(V,n(),e(t(i,{get when(){return m()},get fallback(){return s(B,n())},children:r=>[s(G,n(),e(r().project.name),e(t($,{variant:"secondary",class:"bg-white/20 text-white",get children(){return j(r().project.currentPhase)}})),e(r().progress.overallProgress),e(t(i,{get when(){return r().project.description},get children(){return s(L,n(),e(r().project.description))}})),e(t(p,{get children(){return[t(c,{get when(){return l.currentUser.role==="client"},get children(){return s(R,n(),e(t(P,{class:"w-4 h-4"})))}}),t(c,{get when(){return w()},get children(){return s(F,n(),e(t(i,{get when(){return r().teamMembers},get children(){return s(H,n(),e(t(S,{class:"w-4 h-4"})),e(r().teamMembers.length))}})),e(t(i,{get when(){return r().project.startDate},get children(){return s(z,n(),e(t(k,{class:"w-4 h-4"})),e(o(r().project.startDate)))}})),e(t(i,{get when(){return r().project.targetCompletionDate},get children(){return s(q,n(),e(t(y,{class:"w-4 h-4"})),e(o(r().project.targetCompletionDate)))}})))}})]}})),e(t(p,{get children(){return[t(c,{get when(){return x()},get children(){return[s(f,n(),`/projects/${e(l.projectId,!0)}/workflow`,e(t(d,{variant:"secondary",get children(){return[t(I,{class:"w-4 h-4 mr-2"}),"Manage Workflow"]}}))),s(f,n(),`/admin/projects/${e(l.projectId,!0)}`,e(t(d,{variant:"secondary",get children(){return[t(A,{class:"w-4 h-4 mr-2"}),"Edit Project"]}})))]}}),t(c,{get when(){return l.currentUser.role==="client"},get children(){return s(f,n(),`/projects/${e(l.projectId,!0)}/client-portal`,e(t(d,{variant:"secondary",get children(){return[t(W,{class:"w-4 h-4 mr-2"}),"View Progress"]}})))}}),t(c,{when:!0,get children(){return s(f,n(),`/projects/${e(l.projectId,!0)}/timeline`,e(t(d,{variant:"secondary",get children(){return[t(C,{class:"w-4 h-4 mr-2"}),"View Reports"]}})))}})]}})),e(r().progress.overallProgress),e(t(_,{get value(){return r().progress.overallProgress},max:100,class:"h-3 bg-gray-600"}))),t(g,{class:"p-6",get children(){return[s(J,n()),s(K,n(),e(t(h,{get each(){return r().progress.phases},children:a=>s(ie,n(),e(j(a.phase.phaseName)),e(t($,{variant:"outline",get class(){return a.status==="completed"?"bg-green-50 text-green-700":a.status==="active"?"bg-blue-50 text-blue-700":"bg-gray-50 text-gray-500"},get children(){return a.status}})),e(a.progress),e(t(_,{get value(){return a.progress},max:100,class:"h-2"})),e(t(i,{get when(){return b()},get children(){return s(le,n(),e(a.tasksCompleted),e(a.tasksTotal))}})))})))]}}),t(i,{get when(){return u().length>0},get children(){return t(g,{class:"p-6",get children(){return[s(Q,n(),e(t(p,{get children(){return[t(c,{get when(){return l.currentUser.role==="field_technician"},children:"My Assigned Tasks"}),t(c,{get when(){return b()},children:"All Project Tasks"}),t(c,{get when(){return w()},children:"Team Tasks"})]}}))),s(Y,n(),e(t(h,{get each(){return u().slice(0,5)},children:a=>s(de,n(),e(t(p,{get children(){return[t(c,{get when(){return a.status==="completed"},get children(){return t(N,{class:"w-5 h-5 text-green-600"})}}),t(c,{get when(){return a.urgencyStatus==="overdue"},get children(){return t(O,{class:"w-5 h-5 text-red-600"})}}),t(c,{when:!0,get children(){return t(y,{class:"w-5 h-5 text-gray-400"})}})]}})),e(a.taskName),e(a.phaseName),e(t(i,{get when(){return w()&&a.assigneeId},get children(){return s(ce,n(),e(a.assigneeId))}})),e(t(i,{get when(){return a.dueDate},get children(){return s(oe,n(),e(o(a.dueDate)))}})),e(t($,{variant:"outline",get class(){return a.urgencyStatus==="overdue"?"text-red-600 border-red-200":a.urgencyStatus==="due_today"?"text-yellow-600 border-yellow-200":"text-gray-600"},get children(){return a.urgencyStatus.replace("_"," ")}})),e(a.completionPercentage),e(t(_,{get value(){return a.completionPercentage},max:100,class:"h-1 w-16"})))})),e(t(i,{get when(){return u().length>5},get children(){return s(X,n(),`/tasks/my-tasks?project=${e(l.projectId,!0)}`,e(t(d,{variant:"outline",get children(){return["View All ",u().length," Tasks"]}})))}})))]}})}}),t(i,{get when(){return x()&&r().teamMembers},get children(){return t(g,{class:"p-6",get children(){return[s(Z,n()),s(ee,n(),e(t(h,{get each(){return r().teamMembers},children:a=>s(ge,n(),e(t(P,{class:"w-10 h-10 text-gray-400"})),e(a.name),e(a.role.replace("_"," ")))})))]}})}}),t(i,{get when(){return x()&&r().recentActivity},get children(){return t(g,{class:"p-6",get children(){return[s(te,n()),s(re,n(),e(t(h,{get each(){return r().recentActivity?.slice(0,5)},children:a=>s(me,n(),e(t(y,{class:"w-5 h-5 text-blue-600 mt-0.5"})),e(a.description),e(a.user),e(o(a.timestamp)))})))]}})}}),t(i,{get when(){return l.currentUser.role==="client"},get children(){return t(g,{class:"p-6 bg-blue-50 border-blue-200",get children(){return[s(se,n()),s(ae,n(),e(t(i,{get when(){return r().progress.nextMilestone},get children(){return s(ne,n(),e(t(k,{class:"w-5 h-5 text-blue-600 mt-0.5"})),e(r().progress.nextMilestone.name),e(r().progress.nextMilestone.description),e(o(r().progress.nextMilestone.estimatedDate)))}})))]}})}})]})))};var pe=["<div",' class="ff-page-container">',"</div>"];const Ce=()=>{const l=E(),m=T.getCurrentUser("project_manager");return s(pe,n(),e(t(ue,{get projectId(){return l.id},currentUser:m})))};export{Ce as default};
